Error Classification Detailed Version
=====

把 **原来的三大类** 按更细的中类和非常详尽的小类（检查项）重新扩展成表格化清单，覆盖尽可能多的校验场景（日期校验、最大/最小值、格式、交叉字段、文件校验、并发、权限、注入类等等）。下面是详细版（可直接复制到 Excel/CSV）——每一行都是一个“中类 → 若干可逐项勾选的小类/检查点”。

# 🧾 完整 Error 校验清单（大类 → 中类 → 细项）

> 说明：每个小类都列出典型的具体检查项（可直接作为测试用例 / 验证项）。

## I. 输入与数据校验类

| 中类               | 细项（具体检查点）                                                                                                                                                                                      |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 数据类型与格式          | 数据类型是否匹配（int/float/decimal/string/boolean/date/time/datetime/uuid/binary）；能否成功 parse（如 `int("123")`）；JSON/XML 是否可解析；Base64 是否可解码；是否含不可见控制字符；是否含多字节/编码异常（UTF-8 有效性）。                            |
| 字符串格式校验          | 最大长度/最小长度；是否允许空字符串或仅空白；去首尾空格规则；正则匹配（email/URL/slug/hostname/IPv4/IPv6/UUID/自定义格式）；字符集限制（只允许字母/数字/汉字/特殊符号）；Unicode 规范化（NFC/NFD）；禁用词/敏感词检查；大小写规则（是否统一小写）。                                        |
| 数值校验             | 最大值/最小值（含边界/不含边界）；非负/正数判定；整数/浮点判定；精度（小数位数）和 scale/precision 限制；溢出检测；NaN/Infinity 检查；是否可被 N 整除（模检查）；百分比范围 0–100；货币单位与四舍五入规则。                                                                    |
| 日期/时间校验          | 格式校验（yyyy-MM-dd, ISO8601 等）；时区处理（tz aware vs naive）；时间戳单位（s/ms/us）校验；最小/最大日期/时间限制；开始 <= 结束（区间有效性）；未来/过去限制（不能是未来/不能早于某日）；闰年与 02-29 校验；夏令时（DST）切换影响；工作日/节假日校验（业务日历）；年龄计算（满 18 岁等）；时间粒度（秒/毫秒）一致性。 |
| 边界值与范围           | 字符串长度边界；数组/集合的最小/最大元素数；分页参数边界（pageSize max）；文件大小限制（B/KB/MB）；批量提交最大记录数；阈值（上限/下限）精确含/不含边界测试。                                                                                                     |
| 必填 / 空值 / 默认     | 字段是否必须存在（missing vs present）；null 与 空串的区别处理；条件必填（A 存在则 B 必填）；默认值是否生效；互斥字段（A 与 B 不能同时存在）；至少一个必须存在（A/B/C 三选一）。                                                                                   |
| 枚举 / 白名单黑名单      | 值是否在允许集合里；大小写映射（case insensitive）；废弃枚举值兼容性（向后兼容）；黑名单（禁止值）校验。                                                                                                                                   |
| 交叉字段一致性          | 依赖关系（外键/引用是否存在）；派生值一致（amount == qty * price）；状态机/流程校验（只能在特定状态执行某操作）；时间序列单调性（时间戳递增）；复合唯一性（字段组合唯一）。                                                                                              |
| 文件/上传校验          | MIME 类型与魔数校验；允许扩展名；最大/最小文件大小；图片分辨率/宽高/纵横比限制；扫描恶意代码/病毒；文件名合法性（无 ../ 等路径遍历字符）；同时上传文件数量上限；流式上传中断/断点续传处理。                                                                                          |
| API / Payload 结构 | 必要字段存在与类型匹配；额外未知字段处理策略（拒绝/忽略）；JSON Schema / OpenAPI 校验；版本兼容校验（v1/v2）；压缩/分块/传输编码检查。                                                                                                             |
| 国际化 / 本地化        | 本地化数字/日期格式（逗号/点分隔）；货币符号与格式；多语言错误信息；地址/电话号（E.164）格式；姓名/地址本地规则（顺序、字符）。                                                                                                                           |
| 业务规则 / 配额校验      | 用户配额限制（每日/每月/并发）；重复提交检测（幂等 token）；限速/频率限制（X 次/秒）；黑名单/风控规则；合同/订单金额极限；套餐权限校验。                                                                                                                    |
| 可用性/可读性          | 返回的错误码与错误描述是否友好且可定位（含字段名/期望/实际）；是否含机密信息（不要泄露堆栈/密钥）；本地化消息。                                                                                                                                      |

---

## II. 系统与运行类

| 中类       | 细项（具体检查点）                                                                                                   |
| -------- | ----------------------------------------------------------------------------------------------------------- |
| 资源与性能    | CPU 长时间高占用；内存泄漏 / OOM；磁盘空间或 inode 耗尽；文件描述符/句柄耗尽；线程/协程池耗尽；数据库连接池耗尽；GC 暂停过长；I/O 延迟高；慢查询（超过阈值）；请求超时；吞吐量低于 SLO。 |
| 环境与配置    | 必要环境变量缺失或格式错误；配置文件语法错误；Secrets/证书缺失；权限不足（文件/目录/端口）；运行时依赖库缺失或版本不匹配；容器限制（cgroups）错误；Feature flag 配置错位。        |
| 部署与迁移    | 数据库迁移未运行或失败；灰度/滚动发布失败；回滚失败；健康检查设置错误；配置在不同环境不一致（dev/prod）；蓝绿/金丝雀切换问题引发中断。                                    |
| 网络与通信    | DNS 解析失败；连接被拒绝（ECONNREFUSED）；TLS 握手失败 / 证书过期；链路高丢包；长连接断开；代理/反向代理 502/503；负载均衡转发错误；跨区域网络延迟。                  |
| 并发与一致性   | 死锁（DB/线程）；竞态条件（race）；悲观/乐观锁冲突；写冲突导致部分成功；重复消息处理（at-least-once）导致幂等问题；缓存一致性问题（缓存脏数据）。                         |
| 数据库与持久化  | 约束违反（unique/fk/check）；事务回滚；长事务导致锁争用；索引缺失导致慢查询；复制延迟/分片问题；数据损坏或不一致；备份/恢复失败。                                   |
| 存储与文件系统  | 权限错误（读/写被拒）；网络文件系统延迟或挂掉；对象存储（S3）最终一致性导致的短暂读取不到；快照/备份失败；存储配额。                                                |
| 监控/日志/告警 | 关键指标缺失或上报失败；日志格式不统一或缺失追踪 ID；告警阈值设置不当（漏报警/告警风暴）；追踪链（trace/span）断裂；仪表盘数据滞后。                                   |
| 可用性 / 容灾 | 单点故障（SPOF）；故障转移失败；集群分裂（split-brain）；降级策略未生效；灾备演练失败。                                                         |
| 兼容性与版本   | API/协议不兼容（序列化格式变更）；客户端与服务端版本不匹配；库/运行时升级破坏兼容性。                                                               |

---

## III. 安全与权限类

| 中类                 | 细项（具体检查点）                                                                                                                    |
| ------------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| 认证（Authentication） | 缺少认证（匿名访问不该开放）；凭证过期（Token/JWT exp / nbf）；签名校验失败；弱口令/默认密码仍被使用；多因素认证失败；登录暴力破解检测与速率限制；会话固定（session fixation）。                   |
| 授权（Authorization）  | 横向越权（访问他人数据）；纵向越权（普通用户执行管理员操作）；权限校验缺失或错误的权限映射；基于角色/属性的策略不生效；URL/接口级权限遗漏。                                                     |
| 注入类攻击              | SQL 注入（参数化避免）；NoSQL 注入；命令注入（shell）；模板注入（服务器端模板）；LDAP/XPath 注入；XML XXE（外部实体）。                                                 |
| 跨站与浏览器安全           | XSS（stored/reflected/DOM）；CSRF（缺少 token 或 SameSite 设置不当）；Open Redirect；Clickjacking（缺 X-Frame-Options）；不安全 CORS 策略（* 或过宽来源）。 |
| 数据保护 / 加密          | 传输层 TLS 是否启用并强制（HSTS）；敏感字段加密（密码、PII）；密钥管理与轮换；静态配置中不应含明文凭证；日志记录中避免敏感信息。                                                       |
| 第三方/依赖安全           | 依赖中存在已知漏洞（CVE）；未对依赖签名/校验；供应链攻击风险（恶意包）；外部服务的权限配置不当。                                                                           |
| 网络与基础设施安全          | 不必要的端口暴露；防火墙规则太宽松；SSH/RDP 默认凭证；证书过期或不受信任 CA；不安全的加密套件。                                                                        |
| 隐私与合规              | PII/PHI 未掩码或未按合规处理；数据保留/删除策略不符合法规（GDPR/CCPA）；跨境数据传输违规；未获得用户同意。                                                               |
| 审计与监控安全            | 审计日志缺失或不完整；日志可被篡改；未对关键操作做审计；事件响应链路不可用。                                                                                       |
| 安全配置与默认            | 默认开启的调试信息泄露（stack trace）；默认证书/密钥未更换；安全头缺失（CSP、X-Content-Type-Options 等）。                                                     |

---

# ✅ 建议的使用方式（我可以帮你做的）

* 我可以把上面表格 **导出成 Excel (.xlsx)**，并加上列：`是否需要校验（Y/N）`、`优先级（高/中/低）`、`建议处理方式（前端/后端/网关/DB）`、`测试样例`。
* 我也可以把常见的校验项（比如：日期校验、最大/最小数值、email、身份证号、信用卡 Luhn）直接生成 **示例正则 / 验证函数（JavaScript / Java / Python）**。
* 如果你希望把每一项变成可执行的 **检查清单（Checklist）**（比如 QA 用的 CSV/Excel），我现在就可以生成并提供下载链接。

你想要我接下来做哪一项？

1. **直接把此表导出为 Excel 并添加勾选列**（我会生成文件并给下载链接）。
2. **把常用校验项（日期、最大/最小、email、文件、交叉字段）生成示例代码**（选择语言：JS/Java/Python）。
3. **仅继续在聊天中扩展某一类的更细项**（请指定哪一类）。

（如果要导出 Excel 或示例代码，请直接选 1 或 2，并告诉我语言偏好；我会马上在当前回复里生成并返回结果。）
